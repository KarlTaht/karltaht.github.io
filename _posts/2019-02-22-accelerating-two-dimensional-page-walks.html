---
layout: post
title: Accelerating Two-Dimensional Page Walks for Virtualized Systems
date: '2019-02-22T14:08:00.001-08:00'
author: Karl Taht
tags:
- asplos
- TLB
- virtual machines
- address translation
- amd
- server
- virtual address
- MMU
- virtualization
modified_time: '2019-03-21T12:11:53.204-07:00'
blogger_id: tag:blogger.com,1999:blog-2670908301789336410.post-3587706153534149343
blogger_orig_url: https://researchdoneright.blogspot.com/2019/02/accelerating-two-dimensional-page-walks.html
---

Authors: Ravi Bhargava, Benjamin Serebrin, Francesco Spadini, Srilatha Manne<br />Venue:&nbsp; &nbsp; ASPLOS 2008<br /><br />This paper examines the effects of a virtualization on address translation. It is known that minimizing the number of virtualization exits to the hypervisor is critical for optimal performance. By default, two dimensions of address translation would be needed -- guest VA to guest PA, then guest PA to system PA. By default this is done by a "shadow page table" in software. However, the use of a nested page table enables full translation form guest VA to system PA via hardware. However, added complexity can yield reduced TLB hit rates, which can lead to degradation in performance by up to 70% over native execution.<br /><br />As such, the authors of this paper introduce&nbsp;<i>Page Walk Cache</i>&nbsp;(PWC), which when used in combination with nested paging, can yield up to a 38% performance improvement (or more referenced outside of the paper).&nbsp; The authors of this paper perform careful analysis to show exactly what levels of address translation should be cached for maximum effectiveness. They then utilize this information, along with further sensitivity analysis, to design a their PWC and Nested TLB MMU. Further analysis also shows that use of hugepages can further improve performance.<br /><br />Note: This paper covers a complex topic, but does a good job at summarizing a large portion of the background. It is highly recommended to reference the original text for a deeper understanding.<br /><br /><a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.645.38&amp;rep=rep1&amp;type=pdf">Full Paper</a>
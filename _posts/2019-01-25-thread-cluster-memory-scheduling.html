---
layout: post
title: 'Thread Cluster Memory Scheduling: Exploiting Differences in Memory Access
  Behavior'
date: '2019-01-25T09:29:00.003-08:00'
author: Karl Taht
tags:
- fairness
- scheduling
- memory scheduling
- memory
- scheduler
- throughput
modified_time: '2019-01-25T09:29:49.055-08:00'
blogger_id: tag:blogger.com,1999:blog-2670908301789336410.post-2251611625422446068
blogger_orig_url: https://researchdoneright.blogspot.com/2019/01/thread-cluster-memory-scheduling.html
---

Authors: Yoongu Kim, Michael Papamichael, Onur Mutlu, and Mor Hachol-Balter<br />Venue:&nbsp; &nbsp;MICRO 2010<br /><br />This paper presents Thread Cluster Memory Scheduling (TCM), a memory scheduling algorithm that targets optimizing both system throughput and fairness. To achieve this, three key ideas are employed.<br /><br />Firstly, threads are clustered as either bandwidth intensive or non-intensive. The idea here is that low-bandwidth threads are more sensitive to latency. While an example is presented, an easier way to reason about this is that a low-bandwidth thread needs only a small fraction of memory service time to see a significant performance increase. In other words, it has a high ROI with minimal impact to other threads. As such, non-BW-intensive threads are always given the highest priority.<br /><br />The second observation to be exploited is the disparity in behavior among high-bandwidth threads. Specifically, a metric <i>niceness</i>&nbsp;measures a threads susceptibility to interference and impact on other threads. Threads with high row-buffer locality will starve of other threads, thus threads with high RBL are "hostile" and have a lower nice value. Similarly, threads with high bank level parallelism is more susceptible to hostile threads, and thus given a higher nice value.<br /><br />The final piece of the puzzle is in the scheduling algorithm, <i>Insertion Shuffle</i>,&nbsp;which employs niceness values. Insertion shuffle minimizes the amount of time hostile threads are given priority and maximizes the time nice threads given priority. There is an interesting auxiliary effect which the authors refer to as "memory service leaks", which allows nice threads of high priority actually allow lower priority threads to be serviced. Finally, in the event that all threads have relatively similar behavior, a randomized shuffle is used.<br /><br />In all, TCM provides more throughput and higher fairness compared to existing state-of-the-art such as FR-FCFS, STFM, PAR_BS, and ATLAS. In addition, TCM's thresholds allow for a predictable trade-off between throughput and fairness. The separate clusters also allow for OS thread prioritization (weighting) without losing complete fairness by only applying prioritization in relation to the thread's respective cluster.<br /><br /><a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.193.8550&amp;rep=rep1&amp;type=pdf">Full Text</a>